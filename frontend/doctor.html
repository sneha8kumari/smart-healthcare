<!DOCTYPE html>
<html>
<head>
    <title>Add Doctor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
     <link rel="stylesheet" href="style.css">

</head>
<body class="container mt-4">

<h1>Add Doctor</h1>

<!-- Doctor Name -->
<label class="form-label">Doctor Name:</label>
<input id="name" class="form-control" placeholder="Enter doctor name"><br>

<!-- Department Dropdown -->
<label class="form-label">Department:</label>
<select id="department" class="form-control">
    <option value="">Select Department</option>
    <option value="Cardiology">Cardiology</option>
    <option value="Dermatology">Dermatology</option>
    <option value="Orthopedics">Orthopedics</option>
    <option value="General Medicine">General Medicine</option>
    <option value="Pediatrics">Pediatrics</option>
    <option value="Neurology">Neurology</option>
    <option value="ENT">ENT</option>
    <option value="Gynecology">Gynecology</option>
    <option value="Dental">Dental</option>
    <option value="Physiotherapy">Physiotherapy</option>
</select><br>

<!-- Working time -->
<label class="form-label">Working Start Time:</label>
<input type="time" id="start" class="form-control"><br>

<label class="form-label">Working End Time:</label>
<input type="time" id="end" class="form-control"><br>

<button class="btn btn-primary" onclick="addDoctor()">Add Doctor</button>

<p id="result" class="mt-3"></p>

<h2 class="mt-4">Available Doctors</h2>
<ul id="doctorList"></ul>

<script>
// Add doctor
async function addDoctor() {
    const name = document.getElementById("name").value;
    const department = document.getElementById("department").value;
    const working_start = document.getElementById("start").value;
    const working_end = document.getElementById("end").value;

    let res = await fetch("http://localhost:5000/api/doctors", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ name, department, working_start, working_end })
    });

    let data = await res.json();

    document.getElementById("result").innerHTML =
        "<b>Doctor Added! ID: " + data.doctor_id + "</b>";

    loadDoctors();
}

// Load doctor list
async function loadDoctors() {
    let res = await fetch("http://localhost:5000/api/doctors");
    let data = await res.json();

    let list = document.getElementById("doctorList");
    list.innerHTML = "";

    data.forEach(d => {
        let li = document.createElement("li");
        li.innerText = d.name + " (" + d.department + ")";
        list.appendChild(li);
    });
}

// Load list on page open
loadDoctors();
</script>

</body>
</html>
